@{
    Layout = "~/Views/Shared/_AuthLayout.cshtml";
    var token = Context.Request.Query["token"].ToString();
}

<main class="auth-cover-wrapper">
    <div class="auth-cover-content-inner">
        <div class="auth-cover-content-wrapper">
            <div class="auth-img">
                <img src="~/lib/templates/images/auth/auth-cover-login-bg.svg" alt="" class="img-fluid">
            </div>
        </div>
    </div>
    <div class="auth-cover-sidebar-inner">
        <div class="auth-cover-card-wrapper">
            <div class="auth-cover-card p-sm-5">
                <div class="wd-50 mb-5">
                    <img src="~/images/logo_small.webp" alt="" class="img-fluid">
                </div>
                <h2 class="fs-20 fw-bolder mb-4">Reset Password</h2>
                <h4 class="fs-13 fw-bold mb-2">Create New Password</h4>
                <p class="fs-12 fw-medium text-muted">Enter your new password below. Make sure it's strong and secure.
                </p>

                @if (string.IsNullOrEmpty(token))
                {
                    <div class="alert alert-danger" role="alert">
                        <i class="feather-alert-circle me-2"></i>
                        <strong>Invalid Request</strong>
                        <p class="mb-0 small mt-1">Reset token is missing. Please use the link from your email.</p>
                    </div>
                    <div class="mt-4 text-center">
                        <a href="@Url.Action("ForgotPassword", "Auth")" class="btn btn-primary">
                            <i class="feather-mail me-2"></i>Request New Reset Link
                        </a>
                    </div>
                }
                else
                {
                    <form id="resetPasswordForm" class="w-100 mt-4 pt-2">
                        <input type="hidden" id="resetToken" name="token" value="@token">

                        <div id="resetPasswordAlertPlaceholder"></div>

                        <div class="mb-4">
                            <label for="inputNewPassword" class="form-label fw-semibold">New Password <span
                                    class="text-danger">*</span></label>
                            <div class="input-group">
                                <input id="inputNewPassword" name="newPassword" type="password" class="form-control"
                                    placeholder="Enter new password" required minlength="6">
                                <button class="btn btn-outline-secondary" type="button" id="toggleNewPassword">
                                    <i class="feather-eye"></i>
                                </button>
                            </div>
                            <small class="text-muted">Password must be at least 6 characters</small>
                        </div>

                        <div class="mb-4">
                            <label for="inputConfirmPassword" class="form-label fw-semibold">Confirm Password <span
                                    class="text-danger">*</span></label>
                            <div class="input-group">
                                <input id="inputConfirmPassword" name="confirmPassword" type="password" class="form-control"
                                    placeholder="Confirm new password" required minlength="6">
                                <button class="btn btn-outline-secondary" type="button" id="toggleConfirmPassword">
                                    <i class="feather-eye"></i>
                                </button>
                            </div>
                            <small class="text-muted">Re-enter your new password</small>
                        </div>

                        <div class="mt-5">
                            <button id="btnSubmit" type="submit" class="btn btn-lg btn-primary w-100">
                                <i class="feather-check me-2"></i>Reset Password
                            </button>
                        </div>
                    </form>
                }

                <div class="mt-4 text-center">
                    <a href="@Url.Action("Index", "Auth")" class="fs-11 text-primary">
                        <i class="feather-arrow-left me-1"></i>Back to Login
                    </a>
                </div>
            </div>
        </div>
    </div>
</main>

@section Scripts {
    <script src="~/js/auth-reset-password.js?v=@DateTime.Now.Ticks"></script>
}